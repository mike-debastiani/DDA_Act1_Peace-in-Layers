<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wdth,wght@0,75..100,100..700;1,75..100,100..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../GlobalStyles.css">
    <link rel="stylesheet" href="datavis.css">
  </head>

  <body>
    <!-- HEADER -->
    <header class="datavis-header">
      <!-- LEFT Menu -->
      <button id="backToCommunitiesBtn" class="btn btn-secondary">
        <img src="../src/icons/backArrowIcon.svg" alt="Back Icon" class="btn-icon" style="width: 20px; height: 32px" />
        Back to Communities
      </button>

      <!-- RIGHT Menu group -->
      <div class="header-right">
        <a href="../intro.html" class="btn btn-primary">
          <img src="../src/icons/introIcon.svg" alt="Intro Icon" class="btn-icon" style="width: 41px; height: 9px" />
          Intro
        </a>

        <div class="menu-toggle">
          <div class="menu-container" id="menuContainer">
            <button class="menu-button" id="menuToggleBtn">
              <img src="../src/icons/hamburgerMenuIcon.svg" alt="Menu" class="menu-icon" style="width: 28px; height: 18px" />
            </button>

            <div class="menu-content">
              <a href="#" class="menu-item">Home</a>
              <a href="#" class="menu-item">Credits</a>
              <div class="menu-item-with-arrow">
                <a href="#" class="menu-item">Language</a>
                <img src="../src/icons/dropdownArrowIcon.svg" alt="Dropdown" style="width: 16px; height: 9px" />
              </div>
            </div>

            <img src="../src/icons/closeIcon.svg" alt="Close" class="menu-close" id="menuCloseBtn" />
          </div>
        </div>
      </div>
    </header>

    <div class="main-content">
      <div class="content-container">
      <!-- SIDEBAR -->
      <aside class="panel" id="panel">
        <div class="panelScroll">
          <!-- TOP TITLE ROW -->
          <div class="titleTop">
            <h1 id="pageTitle">Community Data</h1>

            <div class="votesHeaderWrap" id="votesHeaderWrap">
              <button
                class="votesHeaderBtn right"
                id="votesHeaderBtn"
                type="button"
                title="Highlight all votes"
              >
                <span id="totalVotesHead" class="topVotesNumber">0</span>
                <span class="metaLabel">total votes</span>
              </button>
            </div>
          </div>

          <!-- INDICATORS SECTION -->
          <section class="section" id="sectionIndicators">
            <div class="sectionHead">
              <div class="leftHead">
                <div class="titleLine">
                  <h3>
                    Indicators
                    <span id="indCount" class="count"></span>
                  </h3>
                </div>
              </div>

              <button
                class="btn btn-show-all"
                id="toggleInd"
                aria-expanded="false"
              >
                <span class="toggle-text" id="indToggleText">show all</span>
                <img src="../src/icons/dropdownArrowIcon.svg" alt="Dropdown" class="btn-icon toggle-arrow" style="width: 17px; height: 9px;">
              </button>
            </div>

            <div id="indWrap">
              <ul class="indList" id="indicatorList"></ul>
            </div>
          </section>

          <!-- SUBCATEGORIES SECTION -->
          <section class="section" id="sectionSubcats">
            <div class="sectionHead">
              <div class="leftHead">
                <div class="titleLine">
                  <h3>
                    Subcategories
                    <span id="subCount" class="count"></span>
                  </h3>
                </div>
              </div>

              <button
                class="btn btn-show-all"
                id="toggleSub"
                aria-expanded="false"
              >
                <span class="toggle-text" id="subToggleText">show all</span>
                <img src="../src/icons/dropdownArrowIcon.svg" alt="Dropdown" class="btn-icon toggle-arrow" style="width: 17px; height: 9px;">
              </button>
            </div>

            <div id="subsWrap">
              <div id="subPills"></div>
            </div>
          </section>

          <!-- CATEGORIES SECTION -->
          <section class="section" id="sectionCats">
            <div class="sectionHead">
              <div class="leftHead">
                <div class="titleLine">
                  <h3>
                    Categories
                    <span id="catCount" class="count"></span>
                  </h3>
                </div>
              </div>

              <button
                class="btn btn-show-all"
                id="toggleCat"
                aria-expanded="false"
              >
                <span class="toggle-text" id="catToggleText">show all</span>
                <img src="../src/icons/dropdownArrowIcon.svg" alt="Dropdown" class="btn-icon toggle-arrow" style="width: 17px; height: 9px;">
              </button>
            </div>

            <div id="catsWrap">
              <div id="catPills"></div>
            </div>
          </section>

          <!-- DIMENSIONS SECTION -->
          <section class="section" id="sectionDims">
            <div class="sectionHead">
              <div class="leftHead">
                <div class="titleLine">
                  <h3>
                    Dimensions
                    <span id="dimCount" class="count"></span>
                  </h3>
                </div>
              </div>

              <button
                class="btn btn-show-all"
                id="toggleDim"
                aria-expanded="false"
              >
                <span class="toggle-text" id="dimToggleText">show all</span>
                <img src="../src/icons/dropdownArrowIcon.svg" alt="Dropdown" class="btn-icon toggle-arrow" style="width: 17px; height: 9px;">
              </button>
            </div>

            <div id="dimsWrap">
              <div id="dimPills"></div>
            </div>
          </section>
        </div>
      </aside>

      <!-- CANVAS AREA -->
      <div class="canvasWrap" id="p5-wrap">
        <div class="layerBadge" id="selectedLayerDisplay">
          <span class="layerBadgeLabel">Selected Layer:</span>
          <span class="layerBadgeValue" id="selectedLayerValue">None</span>
        </div>

        <button id="zoomBtn" class="zoomBtn">Zoom</button>
      </div>
      </div>

      <!-- BOTTOM BUTTONS -->
      <div class="bottom-controls">
        <div class="bottom-controls-left">
          <button id="clearBtn" class="clearBtn">
            <img src="../src/icons/closeIconWhite.svg" alt="Clear Selection" class="btn-icon" style="width: 18px; height: 18px" />
            Clear Selection
          </button>
        </div>
        <div class="bottom-controls-right">
          <div class="zoom-controls">
            <button class="zoom-step active" data-zoom="1">1x</button>
            <button class="zoom-step" data-zoom="2">2x</button>
            <button class="zoom-step" data-zoom="3">3x</button>
          </div>
        </div>
      </div>
    </div>

    <!-- LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.3/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>

    <!-- MAIN SKETCH -->
    <script src="sketch.js"></script>
    
    <!-- HEADER FUNCTIONALITY -->
    <script>
      // Add expanding menu functionality
      const menuToggleBtn = document.getElementById('menuToggleBtn');
      const menuContainer = document.getElementById('menuContainer');
      const menuCloseBtn = document.getElementById('menuCloseBtn');
      
      // Toggle menu expansion on hamburger click
      menuToggleBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        menuContainer.classList.toggle('expanded');
      });
      
      // Close menu on close button click
      menuCloseBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        menuContainer.classList.remove('expanded');
      });
      
      // Close menu when clicking outside
      document.addEventListener('click', function(e) {
        if (!menuContainer.contains(e.target)) {
          menuContainer.classList.remove('expanded');
        }
      });

      // Back to Communities functionality
      const backToCommunitiesBtn = document.getElementById('backToCommunitiesBtn');
      backToCommunitiesBtn.addEventListener('click', function() {
        // Navigate back to index.html
        window.location.href = '../index.html';
      });
    </script>
  </body>
</html>
