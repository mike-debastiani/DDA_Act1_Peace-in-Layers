<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Peace in Layers – Intro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wdth,wght@0,75..100,100..700;1,75..100,100..700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="GlobalStyles.css" />
    <!-- Intro-only styles (loaded after so they can override) -->
    <link rel="stylesheet" href="intro.css" />
  </head>
  <body>
    <header class="header-container">
      <h1 class="header-title">Layers of Peace</h1>
      
      <div class="header-buttons">
        <a href="intro.html" class="header-btn header-btn-active">
          <img src="src/icons/introIconWhite.svg" alt="Intro" class="header-btn-icon-intro" />
          Intro
        </a>
        <a href="index.html" class="header-btn header-btn-inactive">
          <img src="src/icons/communityIcon.svg" alt="Communities" class="header-btn-icon-community" />
          Communities
        </a>
        <div class="datavis-dropdown">
          <a href="#" class="header-btn header-btn-inactive" id="datavisDropdownBtn">
            <img src="src/icons/datavisIcon.svg" alt="Datavis" class="header-btn-icon-large" />
            Datavis
          </a>
          <div class="datavis-dropdown-content" id="datavisDropdownContent">
            <a href="DataVis/datavis.html?community=potoci" class="datavis-dropdown-item">Potoci</a>
            <a href="DataVis/datavis.html?community=zalik" class="datavis-dropdown-item">Zalik</a>
            <a href="DataVis/datavis.html?community=cim" class="datavis-dropdown-item">Cim</a>
            <a href="DataVis/datavis.html?community=cernica" class="datavis-dropdown-item">Cernica</a>
            <a href="DataVis/datavis.html?community=bijeli-brijeg" class="datavis-dropdown-item">Bijeli Brijeg</a>
            <a href="DataVis/datavis.html?community=podhum" class="datavis-dropdown-item">Podhum</a>
            <a href="DataVis/datavis.html?community=blagaj" class="datavis-dropdown-item">Blagaj</a>
          </div>
        </div>
        
        <div class="menu-toggle">
          <div class="menu-container" id="menuContainer">
            <button class="menu-button" id="menuToggleBtn">
              <img src="src/icons/hamburgerIcon.svg" alt="Menu" class="header-btn-icon-menu" />
            </button>

            <div class="menu-content">
              <a href="#" class="menu-item">Home</a>
              <a href="#" class="menu-item">Credits</a>
              <div class="menu-item-with-arrow">
                <a href="#" class="menu-item">Language</a>
                <img src="src/icons/dropdownArrowIcon.svg" alt="Dropdown" style="width: 16px; height: 9px" />
              </div>
            </div>

            <img src="src/icons/closeIcon.svg" alt="Close" class="menu-close" id="menuCloseBtn" />
          </div>
        </div>
      </div>
    </header>

    <!-- rest of your page -->
    <div class="intro-wrapper">
      <!-- SECTION 1 -->
      <section class="intro-section is-active">
        <div class="intro-image">
          <img src="assets/images/intro-map-1.png" alt="Map 1" />
          <div class="intro-text">
            <h1 class="text-medium-5xl">Between the Frontlines</h1>
            <p class="text-base">The city of Mostar, located in present-day Bosnia and Herzegovina, became one of the fiercest battlegrounds during the Yugoslav Wars between 1992 and 1995. Intense fighting divided the city along ethnic lines, leaving deep physical and psychological scars that still shape community life today.</p>
          </div>
        </div>
      </section>

      <!-- SECTION 2 -->
      <section class="intro-section">
        <div class="intro-image">
          <img src="assets/images/intro-map-2.png" alt="Map 2" />
          <div class="intro-text">
            <h1 class="text-medium-5xl">A Divided City</h1>
            <p class="text-base">
              After the war, the Neretva River became the city’s unofficial ethnic boundary. Among Muslim Bosniaks, Catholic Croats, and the small Orthodox Serb minority, divisions remain tangible today. The city is still largely divided along ethnic lines, with separate neighborhoods and parallel school systems. These invisible borders continue to shape daily life, reflecting the enduring legacy of the war. Today however, many residents resist the notion of Mostar as a “divided city.”
            </p>
          </div>
        </div>
      </section>
      <!-- SECTION 3 -->
      <section class="intro-section">
        <div class="intro-image">
          <img src="assets/images/intro-map-3.png" alt="Map 3" />
          <div class="intro-text">
            <h1 class="text-medium-5xl">Building Peace</h1>
            <p class="text-base">
              After the war, symbolic reconstruction projects such as the Old Bridge (Stari Most) were extensively funded by the European Union. The bridge, once destroyed during the conflict, became a global emblem of reconciliation and renewal. 
              <br>But beyond these symbols — what does genuine peace look like for the people of Mostar?
            </p>
          </div>
        </div>
      </section>
      <!-- SECTION 4 -->
      <section class="intro-section">
        <div class="intro-image">
          <img src="assets/images/intro-map-4.png" alt="Map 4" />
          <div class="intro-text">
            <h1 class="text-medium-5xl">How to define Peace</h1>
            <p class="text-base">
              The Everyday Peace Indicators (EPI) research explores how people themselves understand peace, not through political agreements or external measures, but through the small signs of everyday life. 
              <br><br>In collaboration with seven communities in Mostar, deliberately chosen to reflect diversity in ethnicity, religion, and location, the project gathered local perspectives on peace. Community members generated statements describing what peace looks like for them, followed by a collective voting process to determine which of these expressions were considered most important.
            </p>
          </div>
        </div>
      </section>
    </div>
    <div class="intro-nav" role="navigation" aria-label="Intro navigation">
      <!-- PREVIOUS -->
      <button class="btn btn-secondary nav-prev">
        <img src="src/icons/backArrowIcon.svg" alt="Previous" class="btn-icon" style="width: 13px; height: 24px" />
        Previous
      </button>

      <!-- STEPS -->
      <ol class="intro-steps" role="list">
        <li class="step is-active" aria-current="step" aria-label="Slide 1"></li>
        <li class="step" aria-label="Slide 2"></li>
        <li class="step" aria-label="Slide 3"></li>
        <li class="step" aria-label="Slide 4"></li>
      </ol>

      <!-- NEXT -->
      <button class="btn btn-secondary nav-next">
        Next
        <img src="src/icons/backArrowIcon.svg" alt="Next" class="btn-icon next-icon" style="width: 13px; height: 24px" />
      </button>
    </div>
    <script>
      console.log('Script started loading...');
      
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM Content Loaded!');
        
        const sections = document.querySelectorAll(".intro-section");
        const steps = document.querySelectorAll(".step");
        const prevBtn = document.querySelector(".nav-prev");
        const nextBtn = document.querySelector(".nav-next");

        let currentIndex = 0;

        function showSection(index) {
          sections.forEach((sec, i) => {
            sec.classList.toggle("is-active", i === index);
            steps[i]?.classList.toggle("is-active", i === index);
          });
        }

        nextBtn.addEventListener("click", () => {
          currentIndex = (currentIndex + 1) % sections.length;
          showSection(currentIndex);
        });

        prevBtn.addEventListener("click", () => {
          currentIndex = (currentIndex - 1 + sections.length) % sections.length;
          showSection(currentIndex);
        });

        steps.forEach((step, i) => {
          step.addEventListener("click", () => {
            currentIndex = i;
            showSection(currentIndex);
          });
        });

        // Add expanding menu functionality
        const menuToggleBtn = document.getElementById('menuToggleBtn');
        const menuContainer = document.getElementById('menuContainer');
        const menuCloseBtn = document.getElementById('menuCloseBtn');
        
        // Toggle menu expansion on hamburger click
        menuToggleBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          menuContainer.classList.toggle('expanded');
        });
        
        // Close menu on close button click
        menuCloseBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          menuContainer.classList.remove('expanded');
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
          if (!menuContainer.contains(e.target)) {
            menuContainer.classList.remove('expanded');
          }
        });

        // Close Intro functionality - return to previous page
        const closeIntroBtn = document.getElementById('closeIntroBtn');
        if (closeIntroBtn) {
          closeIntroBtn.addEventListener('click', function() {
            // Check if there's a referrer (previous page)
            if (document.referrer && document.referrer !== window.location.href) {
              // Go back to the previous page
              history.back();
            } else {
              // Fallback to index.html if no referrer
              window.location.href = 'index.html';
            }
          });
        }

        // Datavis Dropdown functionality
        console.log('Setting up datavis dropdown...');
        const datavisDropdownBtn = document.getElementById('datavisDropdownBtn');
        const datavisDropdownContent = document.getElementById('datavisDropdownContent');
        let dropdownTimeout;

        console.log('Datavis elements found:', {
          btn: datavisDropdownBtn,
          content: datavisDropdownContent
        });

        if (datavisDropdownBtn && datavisDropdownContent) {
          console.log('Adding event listeners...');
          datavisDropdownBtn.addEventListener('mouseenter', function() {
            console.log('Mouse enter on datavis button');
            clearTimeout(dropdownTimeout);
            datavisDropdownContent.classList.add('show');
          });

          datavisDropdownBtn.addEventListener('mouseleave', function() {
            console.log('Mouse leave on datavis button');
            dropdownTimeout = setTimeout(function() {
              datavisDropdownContent.classList.remove('show');
            }, 150);
          });

          datavisDropdownContent.addEventListener('mouseenter', function() {
            console.log('Mouse enter on dropdown content');
            clearTimeout(dropdownTimeout);
            datavisDropdownContent.classList.add('show');
          });

          datavisDropdownContent.addEventListener('mouseleave', function() {
            console.log('Mouse leave on dropdown content');
            dropdownTimeout = setTimeout(function() {
              datavisDropdownContent.classList.remove('show');
            }, 150);
          });
          console.log('Event listeners added successfully!');
        } else {
          console.error('Datavis dropdown elements not found!');
        }
      });
    </script>
  </body>
</html>
